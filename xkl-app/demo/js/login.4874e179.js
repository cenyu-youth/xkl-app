(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"3b49":function(e,t,a){},"41fb":function(e,t,a){"use strict";a("3b49")},7101:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("NavBar",{attrs:{title:"登陆",isTrueArrow:!1}}),e._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"inp_box",attrs:{type:"number",placeholder:"手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],staticClass:"inp_box",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}}),a("van-cell",{attrs:{center:"",title:"记住账号密码"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[a("van-switch",{attrs:{size:"24"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})]},proxy:!0}])}),a("van-button",{staticClass:"submit",on:{click:e.submit}},[e._v("登 陆")]),a("div",{staticClass:"bt-box"},[a("span",{on:{click:function(t){return e.goState({name:"forget"})}}},[e._v("忘记密码")]),a("span"),a("span",{on:{click:function(t){return e.goState({name:"register"})}}},[e._v("马上注册")])])],1)},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"banner"},[n("img",{attrs:{src:a("ceca"),alt:""}})])}],o=a("5530"),r=a("d000"),i=a("c3fb"),c=a("4328"),u=a.n(c),p=a("2f62"),d={name:"Login",components:{NavBar:r["a"]},data:function(){return{phone:"",pwd:"",utils:new i["a"](this),checked:!1}},computed:Object(p["c"])(["userInfo","user"]),created:function(){this.getLocal()},methods:Object(o["a"])(Object(o["a"])({},Object(p["b"])(["changeUserInfo","changeUser"])),{},{goState:function(e){this.$router.push(e)},getLocal:function(){var e=JSON.parse(localStorage.getItem("remeber"));e&&(this.phone=e.phone,this.pwd=e.pwd,this.checked=!0)},submit:function(){var e=this;if(""!=this.phone)return/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/.test(this.phone)?void(""!=this.pwd?this.pwd.length<6?this.$toast("请输入六位及以上的密码"):this.axios({method:"POST",url:"http://106.12.220.193/Webapp/login/lAct",data:u.a.stringify({UserName:this.phone,Password:this.pwd})}).then((function(t){var a=t.data;if(0==a.code){e.$toast.success("登陆成功"),e.checked?localStorage.setItem("remeber",JSON.stringify({phone:e.phone,pwd:e.pwd})):localStorage.removeItem("remeber"),e.changeUserInfo(a.data.user_info);var n=JSON.stringify({user_id:a.data.user_info.user_id,user_token:a.data.user_info.user_token});e.$cookies.set("userData",n,"1m"),e.reqUserInfo(a)}else 0!=a.code&&a.data&&a.data.jumpUrl?window.location.href=a.data.jumpUrl:e.$toast.fail(a.msg)})):this.$toast("请输入密码")):(this.$toast("请输入正确的手机号"),!1);this.$toast("请输入手机号")},reqUserInfo:function(e){var t=this;this.axios({headers:{"user-id":e.data.user_info.user_id,"user-token":e.data.user_info.user_token},method:"GET",url:"http://106.12.220.193/Webapp/home/pushUserInfo",params:{}}).then((function(e){0==e.data.code&&(t.changeUser(e.data.data),t.$router.push({name:"home"}))})).catch((function(e){console.info(e)}))}})},h=d,l=(a("41fb"),a("2877")),f=Object(l["a"])(h,n,s,!1,null,"bf40d522",null);t["default"]=f.exports},ceca:function(e,t,a){e.exports=a.p+"img/logo.b5c05750.png"}}]);
//# sourceMappingURL=login.4874e179.js.map