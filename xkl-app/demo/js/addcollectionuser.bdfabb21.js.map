{"version":3,"sources":["webpack:///./src/views/AddCollectionUser.vue?24f5","webpack:///./src/views/AddCollectionUser.vue?d7c1","webpack:///src/views/AddCollectionUser.vue","webpack:///./src/views/AddCollectionUser.vue?6f53","webpack:///./src/views/AddCollectionUser.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","showPicker","_v","_s","typeValue","text","model","value","callback","$$v","expression","columns","onConfirm","showBankPicker","bankValue","bankColumns","onBankConfirm","showArea","localValue","length","name","areaList","onLoaclConfirm","kaihuhang","chikaren","bankId","checked","submit","staticRenderFns","components","NavBar","computed","data","isAdd","list","created","reqList","reqInit","methods","console","info","e","$toast","axios","shenSu","$router","push","headers","userInfo","user_id","user_token","method","url","sign","$route","query","id","err","component"],"mappings":"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","file":"js/addcollectionuser.bdfabb21.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCollectionUser.vue?vue&type=style&index=0&id=963231f6&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add_collection_user\"},[_c('NavBar',{attrs:{\"title\":\"收款账号\",\"isTrueArrow\":true}}),_c('van-cell',{attrs:{\"is-link\":\"\"},on:{\"click\":function($event){_vm.showPicker = true}}},[_vm._v(_vm._s(_vm.typeValue.text))]),_c('van-popup',{attrs:{\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.showPicker),callback:function ($$v) {_vm.showPicker=$$v},expression:\"showPicker\"}},[_c('van-picker',{attrs:{\"show-toolbar\":\"\",\"title\":\"收款方式\",\"columns\":_vm.columns},on:{\"cancel\":function($event){_vm.showPicker = false},\"confirm\":_vm.onConfirm}})],1),_c('van-cell',{attrs:{\"is-link\":\"\"},on:{\"click\":function($event){_vm.showBankPicker = true}}},[_vm._v(_vm._s(_vm.bankValue.text))]),_c('van-popup',{attrs:{\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.showBankPicker),callback:function ($$v) {_vm.showBankPicker=$$v},expression:\"showBankPicker\"}},[_c('van-picker',{attrs:{\"show-toolbar\":\"\",\"title\":\"选择银行\",\"columns\":_vm.bankColumns},on:{\"cancel\":function($event){_vm.showBankPicker = false},\"confirm\":_vm.onBankConfirm}})],1),_c('van-cell',{attrs:{\"is-link\":\"\"},on:{\"click\":function($event){_vm.showArea = true}}},[_vm._v(_vm._s(_vm.localValue.length > 1 ? _vm.localValue[0].name + ' ' + _vm.localValue[1].name : '开户地 省 市'))]),_c('van-popup',{attrs:{\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.showArea),callback:function ($$v) {_vm.showArea=$$v},expression:\"showArea\"}},[_c('van-area',{attrs:{\"title\":\"银行卡开户地\",\"area-list\":_vm.areaList,\"columns-num\":2},on:{\"cancel\":function($event){_vm.showArea = false},\"confirm\":_vm.onLoaclConfirm}})],1),_c('van-field',{attrs:{\"placeholder\":\"开户行(非必填)\"},model:{value:(_vm.kaihuhang),callback:function ($$v) {_vm.kaihuhang=$$v},expression:\"kaihuhang\"}}),_c('van-field',{attrs:{\"placeholder\":\"持卡人姓名\"},model:{value:(_vm.chikaren),callback:function ($$v) {_vm.chikaren=$$v},expression:\"chikaren\"}}),_c('div',{staticClass:\"tips\"},[_c('van-icon',{attrs:{\"name\":\"warning-o\"}}),_vm._v(\"注意：该姓名必须与身份证设置的姓名一样！否则会引起提现失败。\")],1),_c('van-field',{attrs:{\"type\":\"number\",\"placeholder\":\"银行卡号\"},model:{value:(_vm.bankId),callback:function ($$v) {_vm.bankId=$$v},expression:\"bankId\"}}),_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"lt\"},[_vm._v(\"设为默认\")]),_c('van-switch',{model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}})],1),_c('van-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.submit}},[_vm._v(\"保存\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"add_collection_user\">\n    <NavBar title=\"收款账号\" :isTrueArrow=\"true\"/>\n\n    <van-cell is-link @click=\"showPicker = true\">{{typeValue.text}}</van-cell>\n    <van-popup v-model=\"showPicker\" round position=\"bottom\">\n      <van-picker\n        show-toolbar\n        title=\"收款方式\"\n        :columns=\"columns\"\n        @cancel=\"showPicker = false\"\n        @confirm=\"onConfirm\"\n      />\n    </van-popup>\n\n    <van-cell is-link @click=\"showBankPicker = true\">{{bankValue.text}}</van-cell>\n    <van-popup v-model=\"showBankPicker\" round position=\"bottom\">\n      <van-picker\n        show-toolbar\n        title=\"选择银行\"\n        :columns=\"bankColumns\"\n        @cancel=\"showBankPicker = false\"\n        @confirm=\"onBankConfirm\"\n      />\n    </van-popup>\n\n    <van-cell is-link @click=\"showArea = true\">{{localValue.length > 1 ? localValue[0].name + ' ' + localValue[1].name : '开户地 省 市'}}</van-cell>\n\n    <van-popup v-model=\"showArea\" round position=\"bottom\">\n      <van-area\n        @cancel=\"showArea = false\"\n        @confirm=\"onLoaclConfirm\" title=\"银行卡开户地\" :area-list=\"areaList\" :columns-num=\"2\" />\n    </van-popup>\n\n    <van-field v-model=\"kaihuhang\" placeholder=\"开户行(非必填)\" />\n    <van-field v-model=\"chikaren\" placeholder=\"持卡人姓名\" />\n\n    <div class=\"tips\"><van-icon name=\"warning-o\" />注意：该姓名必须与身份证设置的姓名一样！否则会引起提现失败。</div>\n\n    <van-field type=\"number\" v-model=\"bankId\" placeholder=\"银行卡号\" />\n\n    <div class=\"box\">\n      <div class=\"lt\">设为默认</div>\n      <van-switch v-model=\"checked\" />\n    </div>\n\n    <van-button class=\"submit\" type=\"primary\" @click=\"submit\" size=\"large\">保存</van-button>\n\n   </div>\n</template>\n\n<script>\n\nimport NavBar from '@/components/NavBar.vue';\n\nimport qs from 'qs'\n\nimport { areaList } from '@vant/area-data';\n\nimport { mapState, mapMutations } from 'vuex'\nexport default {\n  name: 'AddCollectionUser',\n  components: {\n    NavBar\n  },\n  computed: mapState([\n      'userInfo',\n      'user'\n  ]),\n  data(){\n    return{\n      isAdd:false,\n      list:[],\n      showPicker:false,\n      typeValue:{text:'银行卡'},\n      columns: ['银行卡'],\n      showBankPicker:false,\n      bankValue:{text: '选择银行'},\n      areaList,\n      showArea:false,\n      localValue: [],\n      kaihuhang:'',\n      chikaren:'',\n      bankId:'',\n      checked:false,\n      bankColumns:[]\n    }\n  },\n  created(){\n\n    this.reqList()\n\n    if(this.$route.query.id){\n      this.isAdd = true;\n\n      this.reqInit()\n    }\n  },\n  methods: {\n\n    ...mapMutations(['changeUserInfo','changeUser']),\n\n    onConfirm(value) {\n      this.value = value;\n      this.showPicker = false;\n    },\n\n    onLoaclConfirm(e){\n      console.info(e)\n      this.localValue = e\n      this.showArea = false\n    },\n\n    onBankConfirm(value){\n      this.bankValue = value;\n      this.showBankPicker = false\n    },\n\n\n\n    reqList(){\n        this.axios({\n          headers:{\n            'Content-Type': 'application/x-www-form-urlencoded',\n            \"user-id\": this.userInfo.user_id,\n            \"user-token\": this.userInfo.user_token\n          },\n          method: 'POST',\n          url: 'http://106.12.220.193/webapp/bank/getInfo',\n          data: qs.stringify({})\n        }).then(result => {\n\n           let res = result.data\n\n          console.info('请求收款账号列表=====>',res)\n          if(res.code == 0){\n            let arr = [];\n\n            for(let i in res.data.bank_list){\n              arr.push({\n                text:res.data.bank_list[i].name,\n                code:res.data.bank_list[i].code,\n                key: i\n              })\n            }\n\n            console.info(arr)\n\n            this.bankColumns = arr\n\n          }else if(res.code == 9999){\n            this.$router.push({name:'login'})\n          }\n        }).catch(err => {\n          console.info(err)\n        })\n    },\n\n    submit(){\n\n      if(this.localValue.length < 2){\n        this.$toast('请选择地址');\n        return;\n      }\n\n      if(this.chikaren == ''){\n        this.$toast('请输入持卡人姓名');\n        return;\n      }\n\n      if(this.bankId == ''){\n        this.$toast('请输入银行卡号');\n        return;\n      }\n\n      if(!this.bankValue.key){\n        this.$toast('请选择开户行');\n        return;\n      }\n\n\n      this.axios({\n          headers:{\n            'Content-Type': 'application/x-www-form-urlencoded',\n            \"user-id\": this.userInfo.user_id,\n            \"user-token\": this.userInfo.user_token\n          },\n          method: 'POST',\n          url: 'http://106.12.220.193/webapp/bank/saveAct',\n          data: qs.stringify({\n            IsDefault: this.checked ? 1 : 0,\n            sign: this.$route.query.id,\n            Province: this.localValue[0].name,\n            City: this.localValue[1].name,\n            OpenBank: this.kaihuhang,\n            BankCardName: this.chikaren,\n            BankCardNo: this.bankId,\n            BankType: this.bankValue.key\n          })\n        }).then(result => {\n\n           let res = result.data\n\n          console.info('添加新卡=====>',res)\n          if(res.code == 0){\n           this.$toast(res.msg)\n            this.$router.back()\n          }else if(res.code == 9999){\n            this.$router.push({name:'login'})\n          }else{\n            this.$toast(res.msg)\n          }\n        }).catch(err => {\n          console.info(err)\n        })\n    },\n\n    shenSu(){\n      if(this.taskData.appeal_url == 2){\n        this.$router.push({name:'appeal', query:{id:this.$route.query.id}})\n      }\n    },\n    reqInit(){\n      this.axios({\n        headers:{\n          'Content-Type': 'application/x-www-form-urlencoded',\n          \"user-id\": this.userInfo.user_id,\n          \"user-token\": this.userInfo.user_token\n        },\n        method: 'POST',\n        url: 'http://106.12.220.193/webapp/bank/getInfo',\n        data: qs.stringify({\n          sign: this.$route.query.id\n        })\n      }).then(result => {\n\n         let res = result.data\n\n        console.info('请求收款账号列表=====>',res)\n\n\n        if(res.code == 0){\n          // this.list = res.data;\n\n          this.bankId = res.data.info.bank_card_no;\n          this.chikaren = res.data.info.bank_card_name\n\n          this.localValue = [{name:res.data.info.province}, {name:res.data.info.city}]\n          this.kaihuhang = res.data.info.open_bank_address\n\n          this.bankValue = res.data.info.bank_name ? {text:res.data.info.bank_name,key:res.data.info.bank_type} : {text: '选择银行'}\n          this.checked = res.data.info.default == 1 ? true : false\n\n        }else if(res.code == 9999){\n          this.$router.push({name:'login'})\n        }\n      }).catch(err => {\n        console.info(err)\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n   .add_collection_user{\n      width: 100%;\n      min-height: 100vh;\n      background-color: #f0f0f0;\n\n\n      .tips{\n        padding: 10px 12px;\n        font-size: 15px;\n        color: #ff4163;\n        background-color: #fff;\n      }\n\n      .box{\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n\n        font-size: 15px;\n        color: #000;\n        background-color: #fff;\n        padding: 10px 12px;\n      }\n\n      .submit{\n        margin-top: 25px;\n        background-color: #1676db;\n        border: none;\n        border-radius: 4px;\n      }\n\n   }\n\n\n\n\n\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCollectionUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCollectionUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddCollectionUser.vue?vue&type=template&id=963231f6&scoped=true&\"\nimport script from \"./AddCollectionUser.vue?vue&type=script&lang=js&\"\nexport * from \"./AddCollectionUser.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddCollectionUser.vue?vue&type=style&index=0&id=963231f6&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"963231f6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}