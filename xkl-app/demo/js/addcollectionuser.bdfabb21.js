(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addcollectionuser"],{7104:function(a,n,e){},"995c":function(a,n,e){"use strict";e("7104")},c476:function(a,n,e){"use strict";e.r(n);var t=function(){var a=this,n=a.$createElement,e=a._self._c||n;return e("div",{staticClass:"add_collection_user"},[e("NavBar",{attrs:{title:"收款账号",isTrueArrow:!0}}),e("van-cell",{attrs:{"is-link":""},on:{click:function(n){a.showPicker=!0}}},[a._v(a._s(a.typeValue.text))]),e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:a.showPicker,callback:function(n){a.showPicker=n},expression:"showPicker"}},[e("van-picker",{attrs:{"show-toolbar":"",title:"收款方式",columns:a.columns},on:{cancel:function(n){a.showPicker=!1},confirm:a.onConfirm}})],1),e("van-cell",{attrs:{"is-link":""},on:{click:function(n){a.showBankPicker=!0}}},[a._v(a._s(a.bankValue.text))]),e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:a.showBankPicker,callback:function(n){a.showBankPicker=n},expression:"showBankPicker"}},[e("van-picker",{attrs:{"show-toolbar":"",title:"选择银行",columns:a.bankColumns},on:{cancel:function(n){a.showBankPicker=!1},confirm:a.onBankConfirm}})],1),e("van-cell",{attrs:{"is-link":""},on:{click:function(n){a.showArea=!0}}},[a._v(a._s(a.localValue.length>1?a.localValue[0].name+" "+a.localValue[1].name:"开户地 省 市"))]),e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:a.showArea,callback:function(n){a.showArea=n},expression:"showArea"}},[e("van-area",{attrs:{title:"银行卡开户地","area-list":a.areaList,"columns-num":2},on:{cancel:function(n){a.showArea=!1},confirm:a.onLoaclConfirm}})],1),e("van-field",{attrs:{placeholder:"开户行(非必填)"},model:{value:a.kaihuhang,callback:function(n){a.kaihuhang=n},expression:"kaihuhang"}}),e("van-field",{attrs:{placeholder:"持卡人姓名"},model:{value:a.chikaren,callback:function(n){a.chikaren=n},expression:"chikaren"}}),e("div",{staticClass:"tips"},[e("van-icon",{attrs:{name:"warning-o"}}),a._v("注意：该姓名必须与身份证设置的姓名一样！否则会引起提现失败。")],1),e("van-field",{attrs:{type:"number",placeholder:"银行卡号"},model:{value:a.bankId,callback:function(n){a.bankId=n},expression:"bankId"}}),e("div",{staticClass:"box"},[e("div",{staticClass:"lt"},[a._v("设为默认")]),e("van-switch",{model:{value:a.checked,callback:function(n){a.checked=n},expression:"checked"}})],1),e("van-button",{staticClass:"submit",attrs:{type:"primary",size:"large"},on:{click:a.submit}},[a._v("保存")])],1)},o=[],i=e("5530"),s=(e("b0c0"),e("d000")),c=e("4328"),r=e.n(c),l=e("9163"),u=e("2f62"),h={name:"AddCollectionUser",components:{NavBar:s["a"]},computed:Object(u["c"])(["userInfo","user"]),data:function(){return{isAdd:!1,list:[],showPicker:!1,typeValue:{text:"银行卡"},columns:["银行卡"],showBankPicker:!1,bankValue:{text:"选择银行"},areaList:l["areaList"],showArea:!1,localValue:[],kaihuhang:"",chikaren:"",bankId:"",checked:!1,bankColumns:[]}},created:function(){this.reqList(),this.$route.query.id&&(this.isAdd=!0,this.reqInit())},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["changeUserInfo","changeUser"])),{},{onConfirm:function(a){this.value=a,this.showPicker=!1},onLoaclConfirm:function(a){console.info(a),this.localValue=a,this.showArea=!1},onBankConfirm:function(a){this.bankValue=a,this.showBankPicker=!1},reqList:function(){var a=this;this.axios({headers:{"Content-Type":"application/x-www-form-urlencoded","user-id":this.userInfo.user_id,"user-token":this.userInfo.user_token},method:"POST",url:"http://106.12.220.193/webapp/bank/getInfo",data:r.a.stringify({})}).then((function(n){var e=n.data;if(console.info("请求收款账号列表=====>",e),0==e.code){var t=[];for(var o in e.data.bank_list)t.push({text:e.data.bank_list[o].name,code:e.data.bank_list[o].code,key:o});console.info(t),a.bankColumns=t}else 9999==e.code&&a.$router.push({name:"login"})})).catch((function(a){console.info(a)}))},submit:function(){var a=this;this.localValue.length<2?this.$toast("请选择地址"):""!=this.chikaren?""!=this.bankId?this.bankValue.key?this.axios({headers:{"Content-Type":"application/x-www-form-urlencoded","user-id":this.userInfo.user_id,"user-token":this.userInfo.user_token},method:"POST",url:"http://106.12.220.193/webapp/bank/saveAct",data:r.a.stringify({IsDefault:this.checked?1:0,sign:this.$route.query.id,Province:this.localValue[0].name,City:this.localValue[1].name,OpenBank:this.kaihuhang,BankCardName:this.chikaren,BankCardNo:this.bankId,BankType:this.bankValue.key})}).then((function(n){var e=n.data;console.info("添加新卡=====>",e),0==e.code?(a.$toast(e.msg),a.$router.back()):9999==e.code?a.$router.push({name:"login"}):a.$toast(e.msg)})).catch((function(a){console.info(a)})):this.$toast("请选择开户行"):this.$toast("请输入银行卡号"):this.$toast("请输入持卡人姓名")},shenSu:function(){2==this.taskData.appeal_url&&this.$router.push({name:"appeal",query:{id:this.$route.query.id}})},reqInit:function(){var a=this;this.axios({headers:{"Content-Type":"application/x-www-form-urlencoded","user-id":this.userInfo.user_id,"user-token":this.userInfo.user_token},method:"POST",url:"http://106.12.220.193/webapp/bank/getInfo",data:r.a.stringify({sign:this.$route.query.id})}).then((function(n){var e=n.data;console.info("请求收款账号列表=====>",e),0==e.code?(a.bankId=e.data.info.bank_card_no,a.chikaren=e.data.info.bank_card_name,a.localValue=[{name:e.data.info.province},{name:e.data.info.city}],a.kaihuhang=e.data.info.open_bank_address,a.bankValue=e.data.info.bank_name?{text:e.data.info.bank_name,key:e.data.info.bank_type}:{text:"选择银行"},a.checked=1==e.data.info.default):9999==e.code&&a.$router.push({name:"login"})})).catch((function(a){console.info(a)}))}})},d=h,k=(e("995c"),e("2877")),f=Object(k["a"])(d,t,o,!1,null,"963231f6",null);n["default"]=f.exports}}]);
//# sourceMappingURL=addcollectionuser.bdfabb21.js.map